
package escala;

import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.print.PageFormat;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;
import javax.swing.JOptionPane;

/**
 * Classe que gera a tela para impressão
 * @author Dream
 */
public class TelaImprimir extends javax.swing.JFrame {

    /**
     * Método construtor de TelaImprimir
     */
    public TelaImprimir(String titulo, String data, PnCalendario[] pc){
        initComponents();
        lbTitulo.setText(titulo);
        lbData.setText(data);
        pnBase1.setViewportView(pc[0]);
        pnBase2.setViewportView(pc[1]);
       ...
        
    }
    /**
     * Método publico.
     * Chamado no TelaEscala(), esse método gerencia a impressão
     * dessa janela.
     */
    public void imprimir(){
        PrinterJob pj = PrinterJob.getPrinterJob();
        pj.setJobName(" Print Component ");

        pj.setPrintable (new Printable() {    
        public int print(Graphics pg, PageFormat pf, int pageNum){
            if (pageNum > 0){
                return Printable.NO_SUCH_PAGE;
            }
            
            Graphics2D g2 = (Graphics2D) pg;
            g2.translate(pf.getImageableX(), pf.getImageableY());
            pnGeral.paint(g2);
            return Printable.PAGE_EXISTS;
        }
        });
        if (pj.printDialog() == false)
            return;
        try{
            pj.print();
        }catch(PrinterException ex) {
            JOptionPane.showMessageDialog(this, "Erro ao imprimir.\nVerifique sua impressora.", "Erro de Impressão!", 0);
        }
    }
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {
        ...
    }// </editor-fold>                        

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        ...
        }

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new TelaImprimir("", "", new PnCalendario[12]).setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify                     
    private javax.swing.JLabel lbData;
    private javax.swing.JLabel lbTitulo;
    ...
    // End of variables declaration                   
}
